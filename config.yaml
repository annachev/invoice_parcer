# Invoice Processor Configuration
# This file contains all configurable settings for the application

# Application settings
app:
  name: "Invoice Processor"
  version: "2.0.0"

  # GUI window settings
  window:
    width: 1200
    height: 600
    title: "Invoice Processor"

# Folder paths (relative to the application directory)
folders:
  pending: "invoices/pending"
  processed: "invoices/processed"

# Background scanner settings
scanner:
  # Interval in seconds between automatic scans for new invoices
  interval_seconds: 300  # 5 minutes

  # Enable/disable background scanning
  enabled: true

# Logging configuration
logging:
  # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"

  # Log file path (set to null to disable file logging)
  file: "invoice_processor/invoice_processor.log"

  # Enable/disable console logging
  console: true

  # Log format
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"

# Parser settings
parser:
  # Confidence threshold for early exit (0.0 - 1.0)
  confidence_threshold: 0.9

  # Enable/disable specific strategies
  strategies:
    two_column: true
    single_column: true
    company_specific: true
    pattern_fallback: true

# Threading settings
threading:
  # Maximum number of concurrent PDF processing threads
  max_workers: 4

  # GUI update delay in milliseconds
  update_delay_ms: 50

# Machine Learning settings
ml:
  # Enable/disable ML-enhanced extraction
  enabled: true  # Set to true to enable ML features

  # NER (Named Entity Recognition) settings
  ner:
    # spaCy model to use: en_core_web_sm (small, fast), en_core_web_md, en_core_web_lg
    model: "en_core_web_sm"

    # Confidence threshold for using NER results (0.0 - 1.0)
    confidence_threshold: 0.6

  # Layout classification settings
  layout:
    # Enable layout-based strategy optimization
    enabled: true  # Set to true to use layout classifier

    # Path to trained sklearn model (optional, uses rule-based if not provided)
    model_path: null  # e.g., "src/invoice_processor/ml/models/layout_classifier.pkl"

    # Use layout prediction to reorder strategies
    optimize_strategy_order: true

  # Ensemble mode settings
  ensemble:
    # Use ensemble mode (combine regex + ML)
    enabled: true

    # Prefer regex results when both available and confident
    prefer_regex: true

    # Minimum confidence to accept ML results
    ml_min_confidence: 0.5

# Vehicle fuzzy matching settings
vehicle_matching:
  # Enable/disable vehicle database matching
  enabled: true

  # Path to Excel file with vehicle database
  excel_path: "vehicles/vehicles.xlsx"

  # Fuzzy match threshold (0.0 - 1.0)
  # If match score >= threshold, replace recipient with matched name
  threshold: 0.9

  # Enable caching of vehicle database in memory
  cache_enabled: true

# Development settings
development:
  # Enable debug mode
  debug: false

  # Show detailed error messages in GUI
  verbose_errors: false
